// AUTO-GENERATED FILE - DO NOT EDIT
// Generated by scripts/generate-registry.mjs
// Run "pnpm generate:registry" to regenerate
// @generated-hash: 847738f6a2d3119f

import type { GameDefinition } from "@slopcade/shared";
import type { TestGameEntry, TestGameMeta } from "../types";

import { metadata as meta_0 } from "@/lib/test-games/games/breakoutBouncer";
import { metadata as meta_1 } from "@/lib/test-games/games/physicsStacker";
import { metadata as meta_2 } from "@/lib/test-games/games/pinballLite";
import { metadata as meta_3 } from "@/lib/test-games/games/simplePlatformer";
import { metadata as meta_4 } from "@/lib/test-games/games/slopeggle";

// ============================================================================
// Type-safe ID union
// ============================================================================

export type TestGameId = "breakoutBouncer" | "physicsStacker" | "pinballLite" | "simplePlatformer" | "slopeggle";

// ============================================================================
// Static registry for lists/menus (no dynamic imports triggered)
// ============================================================================

export const TESTGAMES: ReadonlyArray<TestGameEntry & { id: TestGameId }> = [
  { id: "breakoutBouncer" as const, href: "/test-games/breakoutBouncer", meta: meta_0 },
  { id: "physicsStacker" as const, href: "/test-games/physicsStacker", meta: meta_1 },
  { id: "pinballLite" as const, href: "/test-games/pinballLite", meta: meta_2 },
  { id: "simplePlatformer" as const, href: "/test-games/simplePlatformer", meta: meta_3 },
  { id: "slopeggle" as const, href: "/test-games/slopeggle", meta: meta_4 },
];

export const TESTGAMES_BY_ID = Object.fromEntries(
  TESTGAMES.map(entry => [entry.id, entry])
) as Record<TestGameId, TestGameEntry & { id: TestGameId }>;

// ============================================================================
// Data loaders (async import for data modules)
// ============================================================================

const loaders: Record<TestGameId, () => Promise<{ default: GameDefinition }>> = {
  "breakoutBouncer": () => import("@/lib/test-games/games/breakoutBouncer"),
  "physicsStacker": () => import("@/lib/test-games/games/physicsStacker"),
  "pinballLite": () => import("@/lib/test-games/games/pinballLite"),
  "simplePlatformer": () => import("@/lib/test-games/games/simplePlatformer"),
  "slopeggle": () => import("@/lib/test-games/games/slopeggle"),
};

export async function loadTestGame(id: TestGameId): Promise<GameDefinition> {
  const loader = loaders[id];
  if (!loader) {
    throw new Error(`Unknown testGame id: ${id}. Available: ${Object.keys(loaders).join(", ")}`);
  }
  const module = await loader();
  return module.default;
}

export async function loadAllTestGames(): Promise<Array<{ id: TestGameId; data: GameDefinition }>> {
  const results = await Promise.all(
    TESTGAMES.map(async (entry) => ({
      id: entry.id,
      data: await loadTestGame(entry.id),
    }))
  );
  return results;
}
