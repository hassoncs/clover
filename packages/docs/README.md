# Slopcade Documentation Site

Auto-updating interactive documentation for the Slopcade game engine and AI game maker.

## Features

- **Auto-Updating**: Changes to TypeScript files update in the browser < 3 seconds
- **5 Interactive Pages**: Behaviors, Effects, Particles, Rules, Examples
- **7 Comprehensive Guides**: Setup, testing, asset generation, and more
- **TypeDoc API Reference**: Full TypeScript API documentation
- **Mobile Responsive**: Works on all screen sizes
- **Search**: Full-text search across all pages

## Quick Start

### Start Documentation Site

```bash
# From project root
pnpm docs

# Opens http://localhost:3000 automatically
```

### Build for Production

```bash
pnpm docs:build

# Output in packages/docs/build/
```

### Regenerate TypeDoc API Reference

```bash
pnpm docs:typedoc

# Scans shared/src/types/ and generates API docs
```

## How It Works

### Auto-Updating System

The documentation system uses a **metadata extraction plugin** that:

1. **Scans TypeScript Files**: Watches `shared/src/types/` for changes
2. **Extracts Metadata**: Parses TypeScript exports and JSDoc comments
3. **Generates JSON**: Creates `api-reference/generated/` JSON files
4. **Updates Browser**: Docusaurus hot-reloads pages in < 3 seconds

### File Structure

```
packages/docs/
├── docs/                          # Markdown documentation
│   ├── guides/                    # How-to tutorials
│   ├── examples/                  # Code examples
│   └── ...
├── api-reference/                 # Auto-generated API docs
│   ├── generated/                 # JSON from metadata plugin
│   ├── behaviors.md               # Behaviors page
│   ├── effects.md                 # Effects page
│   ├── particles.md               # Particles page
│   ├── rules.md                   # Rules page
│   └── examples.md                # Examples page
├── src/                           # React components
│   ├── components/                # Custom Docusaurus components
│   └── pages/                     # Custom pages
├── plugins/                       # Docusaurus plugins
│   └── metadata-extractor/        # TypeScript metadata extraction
├── docusaurus.config.ts           # Main config
├── sidebars.ts                    # Navigation structure
└── typedoc.json                   # TypeDoc configuration
```

## Pages Overview

### Interactive Pages (Auto-Generated)

| Page | Source | Content |
|------|--------|---------|
| `/behaviors` | `shared/src/types/behavior.ts` | 22 game behaviors |
| `/effects` | `shared/src/types/effect.ts` | 18 visual effects |
| `/particles` | `shared/src/types/particle.ts` | 10 particle systems |
| `/rules` | `shared/src/types/rule.ts` | Game rules system |
| `/examples` | `app/examples/` | 22 game examples |

### Guides (Manual)

| Guide | Location | Purpose |
|-------|----------|---------|
| Getting Started | `docs/guides/getting-started.md` | Setup and first steps |
| Testing Asset Generation | `docs/guides/testing-asset-generation.md` | AI asset testing |
| Entity System | `docs/guides/entity-system.md` | Entity structure |
| Behavior System | `docs/guides/behavior-system.md` | Game logic |
| Physics System | `docs/guides/physics-system.md` | Physics configuration |
| Rules System | `docs/guides/rules-system.md` | Game rules |
| Deployment | `docs/guides/deployment.md` | Deployment guide |

### API Reference

Full TypeScript API documentation generated by TypeDoc:
- All exported types and interfaces
- JSDoc comments and examples
- Type definitions with descriptions

## Adding New Content

### Add a New Guide

1. Create `packages/docs/docs/guides/my-guide.md`
2. Add frontmatter:
```markdown
---
sidebar_position: 8
---

# My Guide Title

Content here...
```
3. Update `sidebars.ts` to include the guide
4. Run `pnpm docs` to see it live

### Add a New Example

1. Create `app/examples/my_example.tsx` with metadata:
```typescript
import type { ExampleMeta } from "@/lib/registry/types";

export const metadata: ExampleMeta = {
  title: "My Example",
  description: "Does something cool.",
};

export default function MyExample() { ... }
```
2. Run `pnpm generate:registry` to update registry
3. Example automatically appears on `/examples` page

### Update API Reference

The API reference auto-updates when you:
1. Edit TypeScript files in `shared/src/types/`
2. Run `pnpm docs` (TypeDoc runs automatically)
3. Changes appear in browser < 3 seconds

## Configuration

### Docusaurus Config

Edit `docusaurus.config.ts` to:
- Change site title/description
- Add new plugins
- Configure search
- Customize theme

### TypeDoc Config

Edit `typedoc.json` to:
- Change input/output directories
- Configure documentation generation
- Add plugins

### Sidebars

Edit `sidebars.ts` to:
- Reorganize navigation
- Add/remove sections
- Change page order

## Development

### Watch Mode

```bash
pnpm docs
```

Starts Docusaurus in watch mode with:
- Hot module reloading
- TypeDoc auto-generation
- Browser auto-refresh

### Type Checking

```bash
pnpm --filter @slopcade/docs typecheck
```

Verifies TypeScript in documentation code.

### Build & Serve

```bash
pnpm docs:build
pnpm --filter @slopcade/docs serve
```

Builds static site and serves on http://localhost:3000

## Troubleshooting

### Pages Not Updating

1. Check if TypeDoc is running: `pnpm docs:typedoc`
2. Verify JSON files in `api-reference/generated/`
3. Clear cache: `pnpm --filter @slopcade/docs clear`
4. Restart: `pnpm docs`

### Search Not Working

1. Rebuild: `pnpm docs:build`
2. Clear browser cache
3. Check browser console for errors

### Mobile Not Responsive

1. Check viewport meta tag in `docusaurus.config.ts`
2. Test with browser DevTools (F12 → responsive mode)
3. Verify CSS in `src/css/custom.css`

### TypeScript Errors

1. Run `pnpm docs typecheck`
2. Fix errors in `shared/src/types/`
3. Regenerate: `pnpm docs:typedoc`

## Performance

### Update Time

- TypeScript file change → Browser update: **< 3 seconds**
- Markdown file change → Browser update: **< 1 second**
- New example added → Registry update: **< 5 seconds**

### Bundle Size

- Production build: ~2.5 MB (gzipped: ~800 KB)
- Includes all guides, API reference, and examples

## Deployment

### Deploy to Cloudflare Pages

```bash
pnpm docs:build

# Upload packages/docs/build/ to Cloudflare Pages
```

### Deploy to Vercel

```bash
pnpm docs:build

# Upload packages/docs/build/ to Vercel
```

### Deploy to GitHub Pages

```bash
pnpm docs:build

# Push to gh-pages branch
```

## Related Documentation

- **[Project Guide](../../app/AGENTS.md)** - Development workflow
- **[Root README](../../README.md)** - Quick start
- **[Documentation Skill](../../.opencode/skills/documentation.md)** - How to write docs
