# Today's Plan: Launch Prep & Asset Validation

**Date**: 2026-01-26  
**Priority**: Launch readiness validation and polish

---

## High Priority: Validation & Testing

### 1. Validate New Puzzle Game Assets ‚ö° URGENT
Generated graphics last night for new puzzle games. Need to verify they work and look good.

- [ ] **Test each puzzle game manually**
  - [ ] Slopeggle (Peggle clone) - verify pegs, ball, visual clarity
  - [ ] Gem Crush (Match-3) - verify gem sprites, board clarity
  - [ ] Any other puzzle games generated yesterday
- [ ] **Check asset quality**
  - [ ] Assets match game theme
  - [ ] Physics shapes align with sprites
  - [ ] No visual glitches or "wild" AI outputs
- [ ] **Game functionality verification**
  - [ ] Win/lose conditions work
  - [ ] Scoring displays correctly
  - [ ] Physics interactions feel right
  - [ ] No console errors on web/iOS/Android
- [ ] **Document issues** ‚Üí `docs/asset-generation/TUNING_NOTES.md`
  - What works well
  - What needs prompt tuning
  - Specific problematic assets

**Files to check**:
- Asset generation output in R2/debug folders
- Game definitions using new asset packs
- Generation prompts in `api/src/ai/assets.ts`

---

### 2. Verify Native Bluetooth Status üì±
Determine if BLE is viable for future multiplayer features.

- [ ] **Test on iOS**
  - [ ] Host game via BLE
  - [ ] Connect from second device
  - [ ] Verify sync works
- [ ] **Test on Android**
  - [ ] Attempt to host (expected: "not implemented" error)
  - [ ] Document exact error message
- [ ] **Decision point**: Is Android BLE implementation required for launch?
  - If YES ‚Üí Add to Phase 1 of LAUNCH_ROADMAP
  - If NO ‚Üí Defer to post-launch feature
- [ ] **Update LAUNCH_ROADMAP.md** with BLE status

**Files**:
- `app/lib/bluetooth/BLEPeripheralManager.ts`
- `ios/slopcade/BLEPeripheralModule.swift`
- Missing: Android Kotlin implementation

---

## Medium Priority: Launch Preparation

### 3. Production Build Configuration üîß
Make Labs tab conditional for production builds.

- [ ] **Create build-time flag system**
  - [ ] Add `__DEV__` or custom `ENABLE_LABS_TAB` flag
  - [ ] Wire into `app/_layout.tsx` or tab navigator
- [ ] **Conditionally hide Labs tab**
  - [ ] Remove from tab bar in production
  - [ ] Keep available in dev builds
- [ ] **Test both modes**
  - [ ] Dev build shows Labs
  - [ ] Production preview build hides Labs
- [ ] **Document approach** in `docs/BUILD_CONFIG.md`

**Alternative**: Use Expo config plugin to modify app structure at build time.

---

### 4. UI Polish for Launch üé®
Finalize visual presentation for App Store.

- [ ] **Create title screen**
  - [ ] Design Slopcade logo treatment
  - [ ] Animated intro (optional, can be simple fade)
  - [ ] "Tap to Start" interaction
- [ ] **Create splash screen**
  - [ ] Export properly sized assets (iOS/Android specs)
  - [ ] Add to `app.json` or `app.config.ts`
  - [ ] Test on physical devices
- [ ] **General UI audit**
  - [ ] All screens have proper navigation
  - [ ] Consistent button styles
  - [ ] No placeholder text visible
  - [ ] Loading states for async operations
- [ ] **HUD standardization** (from LAUNCH_ROADMAP)
  - [ ] Score counter styling
  - [ ] Health/Lives display
  - [ ] Win/Lose modals

**Asset generation needed**:
- Slopcade logo/wordmark (use Scenario.com)
- Splash screen background
- App icons (various sizes)

---

### 5. Landing Page Strategy üåê
Marketing presence for launch.

- [ ] **Decide on approach**
  - Option A: Simple static page (Vercel/Cloudflare Pages)
  - Option B: Enhanced docs site (leverage existing `pnpm docs`)
  - Option C: Full marketing site (overkill for MVP?)
- [ ] **Minimum content**
  - [ ] Hero section with app screenshots
  - [ ] "AI-powered game skinning" pitch
  - [ ] Download links (App Store/Play Store - future)
  - [ ] Demo video or GIF showcasing regeneration
- [ ] **Technical setup**
  - [ ] Domain/subdomain decision
  - [ ] Deploy pipeline
  - [ ] Analytics integration
- [ ] **Create skeleton** if not deferring to post-launch

---

## High Priority: AI Credit System üí∞

### 6. Database Schema for Credits
Track user AI generation credits/balance.

- [ ] **Design `user_credits` table**
  ```sql
  CREATE TABLE user_credits (
    user_id TEXT PRIMARY KEY,
    sparks INTEGER DEFAULT 0,  -- Soft currency
    gems INTEGER DEFAULT 0,    -- Hard currency
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
  );
  ```
- [ ] **Design `credit_transactions` table**
  ```sql
  CREATE TABLE credit_transactions (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL,
    amount INTEGER NOT NULL,  -- Negative for spend, positive for earn
    currency TEXT NOT NULL,   -- 'sparks' | 'gems'
    reason TEXT NOT NULL,     -- 'generation', 'purchase', 'daily_reward', etc.
    metadata TEXT,            -- JSON: asset_pack_id, game_id, etc.
    created_at INTEGER NOT NULL
  );
  ```
- [ ] **Create migration file** in `api/src/migrations/`
- [ ] **Run migration** on local dev DB
- [ ] **Seed test user** with credits

---

### 7. Cost Estimation System
Guesstimate generation cost before user commits.

- [ ] **Implement cost calculator**
  - [ ] Function: `estimateAssetGenerationCost(gameDefinition)`
  - [ ] Formula: `numAssets * basePerAssetCost * (1 + qualityMultiplier)`
  - [ ] Constants:
    - `BASE_SPARK_COST = 10` (per asset)
    - `FULL_GAME_COST = 100` sparks
    - `GEMS_TO_SPARKS_RATE = 0.1` (10 gems = 100 sparks)
- [ ] **Display in UI**
  - [ ] Show cost preview in "Regenerate Assets" modal
  - [ ] "You will spend X ‚ö°" message
  - [ ] Disable button if insufficient balance
- [ ] **Backend validation**
  - [ ] tRPC mutation checks balance before starting generation
  - [ ] Return error if insufficient credits
  - [ ] Deduct credits AFTER successful generation (or before with rollback)

**Files to create/modify**:
- `api/src/economy/cost-estimator.ts`
- `api/src/trpc/routes/economy.ts`
- `app/components/game/ThemeEditor.tsx` (UI for cost display)

---

### 8. Credit Balance UI
Show user their current balance everywhere relevant.

- [ ] **Create `<CreditBalance />` component**
  - [ ] Display sparks ‚ö° and gems üíé
  - [ ] Tap to open "Get More Credits" modal
  - [ ] Real-time updates via tRPC subscription or polling
- [ ] **Add to key screens**
  - [ ] Main tab navigation (top-right corner)
  - [ ] Game detail screen (when regenerate is available)
  - [ ] Profile/settings screen
- [ ] **Create tRPC queries**
  - [ ] `economy.getBalance` - fetch user credits
  - [ ] `economy.getTransactionHistory` - recent activity

---

### 9. Generation Flow with Credit Deduction
Wire credits into asset generation pipeline.

- [ ] **Update `games.generateAssets` mutation**
  - [ ] Check user balance
  - [ ] Calculate cost
  - [ ] Deduct credits (create transaction record)
  - [ ] Start generation job
  - [ ] On failure: rollback transaction (refund)
- [ ] **Add rate limiting**
  - [ ] Prevent spam regenerations
  - [ ] Max N generations per hour per user
- [ ] **Error handling**
  - [ ] "Insufficient credits" error ‚Üí prompt to earn/buy
  - [ ] Generation failure ‚Üí auto-refund with explanation

**Integration points**:
- `api/src/trpc/routes/asset-system.ts`
- `api/src/ai/pipeline/executor.ts`
- New: `api/src/economy/transactions.ts`

---

## Meta Tasks

### 10. Document Integration
Update roadmap documents with today's findings.

- [ ] **After testing (Task 1)**, update:
  - [ ] `docs/asset-generation/CONTINUATION.md` with prompt tuning notes
  - [ ] `.opencode/memory/human-tasks/` if decisions needed
- [ ] **After BLE test (Task 2)**, update:
  - [ ] `docs/LAUNCH_ROADMAP.md` Phase 1 (if BLE required)
  - [ ] `.opencode/memory/roadmap/active/ble-multiplayer.md` (if deferring)
- [ ] **Create new active roadmap doc** for credit system:
  - [ ] `.opencode/memory/roadmap/active/ai-credit-economy.md`
  - [ ] Link from `ROADMAP.md`

---

## Completion Criteria

**Today is successful if**:

‚úÖ We know exact status of all new puzzle game assets (what works, what needs tuning)  
‚úÖ BLE viability decision is documented with clear next steps  
‚úÖ Credit system database schema is live in dev environment  
‚úÖ Cost estimation function exists and is testable  
‚úÖ Production build can hide Labs tab  
‚úÖ One launch-critical UI element is polished (title or splash screen)

---

## Parking Lot (Not Today)

These are important but can wait:
- RevenueCat IAP integration (Phase 3)
- Android BLE implementation (Phase 1, if needed)
- Full landing page build-out (can launch without)
- Daily rewards / spark earning mechanics (post-launch iteration)
- Asset pack selection UI (nice-to-have, not blocking launch)

---

## Notes

- **From LAUNCH_ROADMAP**: 8-week timeline. We're in pre-Phase 1.
- **From TODAY_PLAN (2026-01-24)**: Stream 3 (Asset Regeneration) needs credit system before it's production-ready.
- **Cost math**: Scenario.com ~$0.02/image. 10 assets = $0.20. 100 sparks ‚âà $1 in gems? TBD pricing.
- **User research**: Do users understand sparks/gems metaphor, or use different terms?

