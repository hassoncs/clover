# Implement AI Generation API Call

**Type**: decision-needed
**Priority**: medium
**Source**: app/components/editor/AIGenerateModal.tsx:46
**Detected**: 2026-01-24

## Context

The `AIGenerateModal` component has a TODO placeholder for the actual AI generation API call. Currently, it simulates generation with a 1.5-second delay and creates a placeholder entity.

```typescript
// TODO: Replace with actual AI generation API call
// For now, simulate generation with a placeholder entity
await new Promise((resolve) => setTimeout(resolve, 1500));

const newId = `ai_generated_${Date.now()}`;
const newEntity: GameEntity = {
  id: newId,
  name: prompt.slice(0, 20) + (prompt.length > 20 ? "..." : ""),
  transform: { x: 10, y: 6, angle: 0, scaleX: 1, scaleY: 1 },
  // ... placeholder entity
};
```

## Why Human Required

This requires architectural decisions:

1. **Which AI API to use?**
   - The project already has OpenRouter integration (GPT-4o) for game generation
   - Should entity generation use the same API or a different one?
   - Should it use the existing `api/src/ai/generator.ts` system?

2. **What should the API generate?**
   - Full entity definition (physics, sprite, behaviors)?
   - Just sprite/visual properties?
   - Should it integrate with the asset generation pipeline?

3. **Integration approach**
   - Direct API call from the modal?
   - tRPC endpoint?
   - Reuse existing game generation infrastructure?

## Potential Approaches

### Option A: Reuse Game Generator
Leverage the existing `api/src/ai/generator.ts` system to generate a single entity instead of a full game.

**Pros**: Consistent with existing architecture, already has AI integration
**Cons**: May be overkill for single entity generation

### Option B: New Entity Generation Endpoint
Create a dedicated tRPC endpoint for entity generation.

**Pros**: Focused, simpler API surface
**Cons**: Duplicates some AI integration logic

### Option C: Client-Side Asset Generation
Use the asset generation pipeline directly from the client.

**Pros**: Immediate visual feedback
**Cons**: Requires exposing Scenario.com credentials to client

## Related Files

- `app/components/editor/AIGenerateModal.tsx` - The modal component
- `api/src/ai/generator.ts` - Existing game generation logic
- `api/src/ai/templates/` - Game template definitions
- `shared/src/types/entity.ts` - Entity type definitions
